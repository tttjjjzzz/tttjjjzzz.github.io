<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CAN 2.0B Module - TJJZ</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    fontFamily: {
                        'sans': ['Inter', 'sans-serif'],
                    },
                    maxWidth: {
                        '8xl': '90rem',
                    }
                },
            },
        }
    </script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="../css/custom.css">
</head>
<body class="font-sans text-gray-100 antialiased">

    <!-- Stripe WebGL Gradient Background -->
    <canvas id="gradient-canvas"></canvas>

    <!-- Sticky Header -->
    <header class="sticky top-0 z-50 w-full shadow-md" style="background: rgba(249, 250, 251, 0.05); backdrop-filter: blur(10px); -webkit-backdrop-filter: blur(10px);">
        <div class="w-full px-6 py-6">
            <div class="flex items-center justify-between w-full">
                <div class="flex-shrink-0">
                    <h1 id="header-name" class="text-4xl font-bold text-gray-100">TJJZ</h1>
                </div>
                <nav class="hidden md:mt-0 md:flex-1 md:flex md:justify-center">
                    <ul id="desktop-nav" class="flex flex-col md:flex-row flex-wrap gap-y-2 gap-x-8">
                        <!-- Navigation generated by JavaScript -->
                    </ul>
                </nav>
                <div id="header-social" class="hidden md:flex flex-shrink-0 items-center gap-x-5 mt-6 md:mt-0">
                    <!-- Social icons generated by JavaScript -->
                </div>
                <div class="md:hidden">
                    <button id="mobile-menu-button" class="text-xl font-medium text-gray-100 hover:text-gray-300">Menu ▾</button>
                </div>
            </div>
            <div id="mobile-menu" class="hidden md:hidden pt-4 pb-2 border-t border-gray-200">
                <ul id="mobile-nav" class="flex flex-col space-y-3">
                    <!-- Navigation generated by JavaScript -->
                </ul>
                <div id="header-social-mobile" class="flex items-center gap-x-6 pt-4 mt-4 border-t border-gray-200">
                    <!-- Social icons generated by JavaScript -->
                </div>
            </div>
        </div>
    </header>

    <!-- Main Content Area -->
    <div class="max-w-8xl mx-auto px-6">
        <main>
            <section class="pt-20 md:pt-32 pb-16 md:pb-32">
                <!-- Back Button -->
                <div class="mb-24">
                    <a href="../index.html#projects" class="inline-flex items-center gap-2 text-purple-300 hover:text-purple-200 transition-colors">
                        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 19l-7-7m0 0l7-7m-7 7h18"/>
                        </svg>
                        Back to Projects
                    </a>
                </div>

                <!-- Project Title -->
                <div class="max-w-5xl mx-auto w-full">
                    <h1 class="text-5xl font-bold text-gray-100 text-center mb-24">CAN 2.0B Module</h1>
                </div>
                
                <!-- Project Content -->
                <div class="max-w-3xl mx-auto w-full">
                    <!--overview section-->
                    <div class="mb-12">
                        <div>
                            <!-- Section Heading -->
                            <h2 class="text-4xl font-bold text-purple-200 mb-6">Overview</h2>
                            <!-- Normal Text -->
                            <p class="text-lg text-gray-300 mb-8">A CAN 2.0B module was developed to interface with and test CAN communication between various motor drivers and a Raspberry Pi. Each module connects to its SPI companion to form a CAN node, enabling validation and testing of CAN communication. The goal of this project is to simplify the communication topology by moving away from SPI and ultimately integrate CAN hardware directly onto the motor driver board. The schematic and PCB were designed using Altium Designer.</p>
                        </div>
                    </div>

                    <!--line element for separation-->
                    <div class="mx-auto my-8 w-full h-px rounded" style="background: linear-gradient(90deg, #efe8ff 0%, #d6c2ff 40%, #b799ff 65%, #8a5bff 100%); box-shadow: 0 0 8px rgba(138,91,255,0.12);"></div>

                    <!--Schematic-->
                    <div class="mb-12">
                        <!-- Section Heading -->
                        <h2 class="text-4xl font-bold text-purple-200 mb-6">Schematic</h2>
                        <!-- Normal Text -->
                        <p class="text-lg text-gray-300 mb-8">This section outlines the electrical schematic design:</p>
                        <!--image-->
                        <div class="mb-12 w-full mx-auto">
                            <img src="../photos/project-can-2b/schematicOverview.png" alt="Overview of Module Implementation" class="rounded-lg shadow-lg mb-2 w-full object-cover">
                            <p class="text-base text-gray-200 text-center mb-8">Main Sheet</p>
                        </div>
                        
                        <!--line element for separation-->
                        <div class="mx-auto my-8 w-1/2 h-px rounded" style="background: linear-gradient(90deg, #efe8ff 0%, #d6c2ff 40%, #b799ff 65%, #8a5bff 100%); box-shadow: 0 0 8px rgba(138,91,255,0.12);"></div>

                        <!--CAN Controller-->
                        <div class="mb-12">   
                            <!--title-->
                            <h3 class="text-2xl font-semibold text-purple-300 mb-4">MCP2515 - CAN Controller</h3>
                            <p class="text-lg text-gray-300 mb-6">Since the BLDC motor driver IC (STSPIN32F0251) does not include an embedded CAN peripheral, the module uses an MCP2515 to interface with the STSPIN32F0251 through SPI. For simplicity, the implementation omits the TX and RX buffers. The CAN controller is interfaced with an MCP2561 CAN transceiver.</p>
                            <!--overview image-->
                            <div class="mb-12 w-3/4 mx-auto">
                                <img src="../photos/project-can-2b/canController.png" alt="Overview of Module Implementation" class="rounded-lg shadow-lg mb-2 w-full object-cover">
                                <p class="text-base text-gray-200 text-center mb-8">MCP2515 - CAN Controller</p>
                            </div>                                            
                        </div>

                        <!--line element for separation-->
                        <div class="mx-auto my-8 w-1/2 h-px rounded" style="background: linear-gradient(90deg, #efe8ff 0%, #d6c2ff 40%, #b799ff 65%, #8a5bff 100%); box-shadow: 0 0 8px rgba(138,91,255,0.12);"></div>

                        <!--Oscillator-->
                        <div class="mb-12">   
                            <!--title-->
                            <h3 class="text-2xl font-semibold text-purple-300 mb-4">AMB3B-16.000MHz - Oscillator</h3>

                            <p class="text-lg text-gray-300 mb-6">The MCP2515 is paired with an external oscillator (16MHz), where the load capacitances were calculated using the following equation:</p>
                            <!--equation image-->
                            <div class="mb-12 w-full mx-auto">
                                <img src="../photos/project-can-2b/capacitanceEquation.png" alt="Overview of Module Implementation" class="rounded-lg shadow-lg mb-2 w-full object-cover">
                                <p class="text-base text-gray-200 text-center mb-8">Load Capacitance Equation</p>
                            </div> 
                            
                            <!--oscillator exaplnaniton-->
                            <p class="text-lg text-gray-300 mb-6">Using a stray capacitance assumption of 3 pF, a load capacitance of 30 pF was initially calculated; however, testing began with 15 pF to evaluate different capacitance values. The oscillator's datasheet recommends 22 pF for 8 MHz and 15 pF for 20 MHz, despite not explicitly addressing the 16 MHz operating frequency used in this design. Through testing, 15 pF was verified to be a suitable value for this implementation.</p>
                            <div class="mb-12 w-3/4 mx-auto">
                                <img src="../photos/project-can-2b/oscillator.png" alt="Overview of Module Implementation" class="rounded-lg shadow-lg mb-2 w-full object-cover">
                                <p class="text-base text-gray-200 text-center mb-8">AMB3B-16.000MHz - Oscillator</p>
                            </div>
                        </div>
                        
                        <!--line element for separation-->
                        <div class="mx-auto my-8 w-1/2 h-px rounded" style="background: linear-gradient(90deg, #efe8ff 0%, #d6c2ff 40%, #b799ff 65%, #8a5bff 100%); box-shadow: 0 0 8px rgba(138,91,255,0.12);"></div>

                        <!--Oscillator-->
                        <div class="mb-12">   
                            <!--title-->
                            <h3 class="text-2xl font-semibold text-purple-300 mb-4">MCP2561 - CAN Transceiver</h3>
                            <p class="text-lg text-gray-300 mb-6">The MCP2561 CAN transceiver serves as the interface between the CAN controller (MCP2515) and the CAN bus. Split termination is implemented using the SPLIT output pin, as recommended by the device datasheet, to reduce interference on the differential line. The CAN bus lines are connected to a screw terminal labeled J2, providing a convenient connection point for testing.</p>
                            <div class="mb-12 w-3/4 mx-auto">
                                <img src="../photos/project-can-2b/transceiver.png" alt="Overview of Module Implementation" class="rounded-lg shadow-lg mb-2 w-full object-cover">
                                <p class="text-base text-gray-200 text-center mb-8">MCP2561 - CAN Transceiver</p>
                            </div>
                        </div>

                        <!--line element for separation-->
                        <div class="mx-auto my-8 w-1/2 h-px rounded" style="background: linear-gradient(90deg, #efe8ff 0%, #d6c2ff 40%, #b799ff 65%, #8a5bff 100%); box-shadow: 0 0 8px rgba(138,91,255,0.12);"></div>

                        <!--header-->
                        <div class="mb-12">   
                            <!--title-->
                            <h3 class="text-2xl font-semibold text-purple-300 mb-4">Connectors</h3>
                            <p class="text-lg text-gray-300 mb-6">For convenience purposes, this CAN module uses a 1x8P Vertical Male Header to connect signal and power lines to off-board MCU-Pins/Power/GND</p>
                            <div class="mb-12 w-3/4 mx-auto">
                                <img src="../photos/project-can-2b/maleHeadConnector.png" alt="Overview of Module Implementation" class="rounded-lg shadow-lg mb-2 w-full object-cover">
                                <p class="text-base text-gray-200 text-center mb-8">1x8 Pin Male Header, 2.54mm pitch</p>
                            </div>
                        </div>
                    </div>

                    <!--line element for separation-->
                    <div class="mx-auto my-8 w-full h-px rounded" style="background: linear-gradient(90deg, #efe8ff 0%, #d6c2ff 40%, #b799ff 65%, #8a5bff 100%); box-shadow: 0 0 8px rgba(138,91,255,0.12);"></div>
                    
                    <!--Board Layout section-->
                    <div class="mb-12">
                        <!--overview-->
                        <!-- Section Heading -->
                        <h2 class="text-4xl font-bold text-purple-200 mb-6">Board Layout</h2>
                        <!-- Normal Text -->
                        <p class="text-lg text-gray-300 mb-8">The board layout was designed prioritizing signal integrity and ease of testing and prototyping during development and use. It adopts a 2-layer stackup with SIGNAL on top layer and GND on bottom layer. Furthermore, the mounting holes were added to provide a means of securing the modules to a chassis.</p>
                        <!--pcb images-->
                        <div class="flex flex-col md:flex-row gap-6 mb-8 mt-8 w-full justify-center md:items-end">
                            <div class="flex flex-col items-center w-full md:w-auto">
                                <img src="../photos/project-can-2b/pcb2d.png" alt="I2C Compliance testing" class="rounded-lg shadow-lg mb-2 w-full md:w-auto h-auto">
                                <p class="text-base text-gray-200 text-center">2D view</p>
                            </div>
                            <div class="flex flex-col items-center w-full md:w-auto">
                                <img src="../photos/project-can-2b/pcb3d.png" alt="Soft-power up timing testing" class="rounded-lg shadow-lg mb-2 w-full md:w-auto h-auto">
                                <p class="text-base text-gray-200 text-center">3D View</p>
                            </div>
                        </div>
                    </div>

                    <!--line element for separation-->
                    <div class="mx-auto my-8 w-full h-px rounded" style="background: linear-gradient(90deg, #efe8ff 0%, #d6c2ff 40%, #b799ff 65%, #8a5bff 100%); box-shadow: 0 0 8px rgba(138,91,255,0.12);"></div>
                   
                    <!--Implementation-->
                    <div class="mb-12">
                        <!--overview-->
                        <!-- Section Heading -->
                        <h2 class="text-4xl font-bold text-purple-200 mb-6">Implementation</h2>
                        <!-- Normal Text -->
                        <p class="text-lg text-gray-300 mb-8">The CAN modules' functions were verified using ESP32 microcontrollers as “mock” MCUs that were connected to the modules through SPI. The modules were then connected to each other through the CAN bus, allowing the microcontrollers to exchange messages in a multi-node network. This setup validated reliable data transmission across the CAN communication system.</p>
                        <!--pcb images-->
                        <div class="flex flex-col md:flex-row gap-6 mb-8 mt-8 w-full justify-center md:items-end">
                            <div class="flex flex-col items-center w-full md:w-auto">
                                <img src="../photos/project-can-2b/implementationTest.jpg" alt="I2C Compliance testing" class="rounded-lg shadow-lg mb-2 w-full md:w-auto h-auto">
                                <p class="text-base text-gray-200 text-center">Test Implementation with ESP32 µ-Controllers</p>
                            </div>
                            <div class="flex flex-col items-center w-full md:w-auto">
                                <img src="../photos/project-can-2b/croppedMD.png" alt="Soft-power up timing testing" class="rounded-lg shadow-lg mb-2 w-full md:w-auto h-auto">
                                <p class="text-base text-gray-200 text-center">Implementation with Motor Driver and UI boards</p>
                            </div>
                        </div>
                         <!-- Normal Text -->
                        <p class="text-lg text-gray-300 mb-8">With functionality verified, the next step is to integrate the CAN commmunication hardware onto the individual motor drivers, eliminating the need for external modules.</p>
                    </div>
        

                </div>
            </section>
        </main>
    </div>

    <script src="../js/config.js"></script>
    <script src="../js/components.js"></script>
    <script src="../js/gradient.js"></script>
</body>
</html>